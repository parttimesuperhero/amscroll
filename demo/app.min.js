(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
const amScroll = require('../dist/amscroll');

var scroller = new amScroll({
  faderSelector: '.fader'
});
window.addEventListener('scroll', scroller.scroller, false);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhbVNjcm9sbCIsInJlcXVpcmUiLCJzY3JvbGxlciIsImZhZGVyU2VsZWN0b3IiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxXQUFXQyxRQUFRLGtCQUFSLENBQWpCOztBQUVBLElBQUlDLFdBQVcsSUFBSUYsUUFBSixDQUFhO0FBQzFCRyxpQkFBZTtBQURXLENBQWIsQ0FBZjtBQUdBQyxPQUFPQyxnQkFBUCxDQUF3QixRQUF4QixFQUFrQ0gsU0FBU0EsUUFBM0MsRUFBcUQsS0FBckQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYW1TY3JvbGwgPSByZXF1aXJlKCcuLi9kaXN0L2Ftc2Nyb2xsJyk7XG5cbnZhciBzY3JvbGxlciA9IG5ldyBhbVNjcm9sbCh7XG4gIGZhZGVyU2VsZWN0b3I6ICcuZmFkZXInXG59KTtcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxlci5zY3JvbGxlciwgZmFsc2UpO1xuXG4iXX0=
},{"../dist/amscroll":2}],2:[function(require,module,exports){
'use strict';

function amScroll(opt) {
  var _this = this;

  this.opts = opt || {};
  this.opts.selector = this.opts.selector || '[data-amScroll]';
  this.opts.faderSelector = this.opts.faderSelector || '[data-fadeonscroll]';
  this.opts.stuckClass = this.opts.stuckClass || 'stuck';
  this.opts.name = this.opts.name || 'amScroll' + new Date().getTime();
  this.opts.includeHeight = this.opts.includeHeight || false;
  this.opts.fixPosition = this.opts.fixPosition || false;

  this.scrolling = false;
  this.fixedEls = [];

  var requestScroll = function requestScroll() {
    if (!_this.scrolling) {
      window.requestAnimationFrame(_this.update);
      _this.scrolling = true;
    }
  };

  var setOffsets = function setOffsets() {
    for (var e = 0; e < _this.elLength; e++) {
      var el = _this.elements[e];
      var i = e;
      var fixPos = 0;
      var tmpEl = void 0;
      var fixAt = el.offsetTop;

      while (tmpEl = _this.elements[i - 1]) {
        var elStyles = getComputedStyle(tmpEl);
        var borderTop = 0;
        var borderBottom = 0;
        var addBorder = elStyles.getPropertyValue('box-sizing') !== 'border-box';

        if (addBorder) {
          borderTop = elStyles.getPropertyValue('border-top-width').replace("px", "");
          borderBottom = elStyles.getPropertyValue('border-bottom-width').replace("px", "");
        }

        fixPos += tmpEl.offsetHeight + borderTop + borderBottom;
        i--;
      }

      el.setAttribute('data-fix-at', fixAt);
      el.setAttribute('data-fix-pos', fixPos);
      el.setAttribute('data-pad-top', fixPos + el.offsetHeight);
    }
  };

  var init = function init() {
    _this.elements = document.querySelectorAll(_this.opts.selector);
    _this.elLength = _this.elements.length;
    _this.fadeElements = document.querySelectorAll(_this.opts.faderSelector);
    _this.fadeElLength = _this.fadeElements.length;
    setOffsets();
  };

  this.update = function () {
    var scrollY = window.scrollY;

    for (var e = 0; e < _this.elLength; e++) {
      var el = _this.elements[e],
          fixAt = parseInt(el.getAttribute('data-fix-at'), 10),
          fixPos = parseInt(el.getAttribute('data-fix-pos'), 10),
          padTop = parseInt(el.getAttribute('data-pad-top'), 10),
          offSet = _this.opts.includeHeight ? el.offsetHeight : 0;

      fixAt += _this.opts.includeHeight ? el.offsetHeight : 0;

      if (scrollY > fixAt - fixPos && _this.fixedEls.indexOf(e) < 0) {
        _this.fixedEls.push(e);
        el.classList.toggle(_this.opts.stuckClass, true);
        if (_this.opts.fixPosition) {
          document.body.style.paddingTop = padTop + 'px';
          el.style.top = fixPos + 'px';
          el.style.position = "fixed";
        }
      } else if (scrollY < fixAt - fixPos - offSet || scrollY <= 0) {
        _this.fixedEls.splice(_this.fixedEls.indexOf(e), 1);
        el.classList.remove(_this.opts.stuckClass);
        if (_this.opts.fixPosition) {
          el.style.position = "relative";
          el.style.top = "0";
          document.body.style.paddingTop = _this.elements[e - 1] ? _this.elements[e - 1].getAttribute('data-pad-top') : 0;
        }
      }
    }

    for (var e = 0; e < _this.fadeElLength; e++) {
      var _el = _this.fadeElements[e];
      var offTop = _el.offsetTop;
      var elHeight = _el.offsetHeight;
      var opacity = ((offTop - scrollY + elHeight) / elHeight).toFixed(3);

      if (offTop - scrollY < 0 && opacity >= 0) {
        _el.setAttribute('style', 'opacity:' + opacity);
      }
    }
    _this.scrolling = false;
  };

  init();

  return {
    scroller: requestScroll
  };
}

module.exports = amScroll;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFtc2Nyb2xsLmpzIl0sIm5hbWVzIjpbImFtU2Nyb2xsIiwib3B0IiwiX3RoaXMiLCJvcHRzIiwic2VsZWN0b3IiLCJmYWRlclNlbGVjdG9yIiwic3R1Y2tDbGFzcyIsIm5hbWUiLCJEYXRlIiwiZ2V0VGltZSIsImluY2x1ZGVIZWlnaHQiLCJmaXhQb3NpdGlvbiIsInNjcm9sbGluZyIsImZpeGVkRWxzIiwicmVxdWVzdFNjcm9sbCIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVwZGF0ZSIsInNldE9mZnNldHMiLCJlIiwiZWxMZW5ndGgiLCJlbCIsImVsZW1lbnRzIiwiaSIsImZpeFBvcyIsInRtcEVsIiwiZml4QXQiLCJvZmZzZXRUb3AiLCJlbFN0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJib3JkZXJUb3AiLCJib3JkZXJCb3R0b20iLCJhZGRCb3JkZXIiLCJnZXRQcm9wZXJ0eVZhbHVlIiwicmVwbGFjZSIsIm9mZnNldEhlaWdodCIsInNldEF0dHJpYnV0ZSIsImluaXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJsZW5ndGgiLCJmYWRlRWxlbWVudHMiLCJmYWRlRWxMZW5ndGgiLCJzY3JvbGxZIiwicGFyc2VJbnQiLCJnZXRBdHRyaWJ1dGUiLCJwYWRUb3AiLCJvZmZTZXQiLCJpbmRleE9mIiwicHVzaCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImJvZHkiLCJzdHlsZSIsInBhZGRpbmdUb3AiLCJ0b3AiLCJwb3NpdGlvbiIsInNwbGljZSIsInJlbW92ZSIsIl9lbCIsIm9mZlRvcCIsImVsSGVpZ2h0Iiwib3BhY2l0eSIsInRvRml4ZWQiLCJzY3JvbGxlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLFFBQVQsQ0FBa0JDLEdBQWxCLEVBQXVCO0FBQ3JCLE1BQUlDLFFBQVEsSUFBWjs7QUFFQSxPQUFLQyxJQUFMLEdBQVlGLE9BQU8sRUFBbkI7QUFDQSxPQUFLRSxJQUFM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QUFJdkIsWUFBSixDQUFpQixPQUFqQixFQUEwQixhQUFhMEIsT0FBdkM7QUFDRDtBQUNGO0FBQ0Q1RCxVQUFNVSxTQUFOLEdBQWtCLEtBQWxCO0FBQ0QsR0ExQ0Q7O0FBNENBeUI7O0FBRUEsU0FBTztBQUNMMkIsY0FBVWxEO0FBREwsR0FBUDtBQUdEOztBQUVEbUQsT0FBT0MsT0FBUCxHQUFpQmxFLFFBQWpCIiwiZmlsZSI6ImFtc2Nyb2xsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBhbVNjcm9sbChvcHQpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICB0aGlzLm9wdHMgPSBvcHQgfHwge307XG4gIHRoaXMub3B0cy5zZWxlY3RvciA9IHRoaXMub3B0cy5zZWxlY3RvciB8fCAnW2RhdGEtYW1TY3JvbGxdJztcbiAgdGhpcy5vcHRzLmZhZGVyU2VsZWN0b3IgPSB0aGlzLm9wdHMuZmFkZXJTZWxlY3RvciB8fCAnW2RhdGEtZmFkZW9uc2Nyb2xsXSc7XG4gIHRoaXMub3B0cy5zdHVja0NsYXNzID0gdGhpcy5vcHRzLnN0dWNrQ2xhc3MgfHwgJ3N0dWNrJztcbiAgdGhpcy5vcHRzLm5hbWUgPSB0aGlzLm9wdHMubmFtZSB8fCAnYW1TY3JvbGwnICsgbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIHRoaXMub3B0cy5pbmNsdWRlSGVpZ2h0ID0gdGhpcy5vcHRzLmluY2x1ZGVIZWlnaHQgfHwgZmFsc2U7XG4gIHRoaXMub3B0cy5maXhQb3NpdGlvbiA9IHRoaXMub3B0cy5maXhQb3NpdGlvbiB8fCBmYWxzZTtcblxuICB0aGlzLnNjcm9sbGluZyA9IGZhbHNlO1xuICB0aGlzLmZpeGVkRWxzID0gW107XG5cbiAgdmFyIHJlcXVlc3RTY3JvbGwgPSBmdW5jdGlvbiByZXF1ZXN0U2Nyb2xsKCkge1xuICAgIGlmICghX3RoaXMuc2Nyb2xsaW5nKSB7XG4gICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKF90aGlzLnVwZGF0ZSk7XG4gICAgICBfdGhpcy5zY3JvbGxpbmcgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICB2YXIgc2V0T2Zmc2V0cyA9IGZ1bmN0aW9uIHNldE9mZnNldHMoKSB7XG4gICAgZm9yICh2YXIgZSA9IDA7IGUgPCBfdGhpcy5lbExlbmd0aDsgZSsrKSB7XG4gICAgICB2YXIgZWwgPSBfdGhpcy5lbGVtZW50c1tlXTtcbiAgICAgIHZhciBpID0gZTtcbiAgICAgIHZhciBmaXhQb3MgPSAwO1xuICAgICAgdmFyIHRtcEVsID0gdm9pZCAwO1xuICAgICAgdmFyIGZpeEF0ID0gZWwub2Zmc2V0VG9wO1xuXG4gICAgICB3aGlsZSAodG1wRWwgPSBfdGhpcy5lbGVtZW50c1tpIC0gMV0pIHtcbiAgICAgICAgdmFyIGVsU3R5bGVzID0gZ2V0Q29tcHV0ZWRTdHlsZSh0bXBFbCk7XG4gICAgICAgIHZhciBib3JkZXJUb3AgPSAwO1xuICAgICAgICB2YXIgYm9yZGVyQm90dG9tID0gMDtcbiAgICAgICAgdmFyIGFkZEJvcmRlciA9IGVsU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2JveC1zaXppbmcnKSAhPT0gJ2JvcmRlci1ib3gnO1xuXG4gICAgICAgIGlmIChhZGRCb3JkZXIpIHtcbiAgICAgICAgICBib3JkZXJUb3AgPSBlbFN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCdib3JkZXItdG9wLXdpZHRoJykucmVwbGFjZShcInB4XCIsIFwiXCIpO1xuICAgICAgICAgIGJvcmRlckJvdHRvbSA9IGVsU3R5bGVzLmdldFByb3BlcnR5VmFsdWUoJ2JvcmRlci1ib3R0b20td2lkdGgnKS5yZXBsYWNlKFwicHhcIiwgXCJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBmaXhQb3MgKz0gdG1wRWwub2Zmc2V0SGVpZ2h0ICsgYm9yZGVyVG9wICsgYm9yZGVyQm90dG9tO1xuICAgICAgICBpLS07XG4gICAgICB9XG5cbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1maXgtYXQnLCBmaXhBdCk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZml4LXBvcycsIGZpeFBvcyk7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGFkLXRvcCcsIGZpeFBvcyArIGVsLm9mZnNldEhlaWdodCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBpbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgICBfdGhpcy5lbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoX3RoaXMub3B0cy5zZWxlY3Rvcik7XG4gICAgX3RoaXMuZWxMZW5ndGggPSBfdGhpcy5lbGVtZW50cy5sZW5ndGg7XG4gICAgX3RoaXMuZmFkZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChfdGhpcy5vcHRzLmZhZGVyU2VsZWN0b3IpO1xuICAgIF90aGlzLmZhZGVFbExlbmd0aCA9IF90aGlzLmZhZGVFbGVtZW50cy5sZW5ndGg7XG4gICAgc2V0T2Zmc2V0cygpO1xuICB9O1xuXG4gIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG5cbiAgICBmb3IgKHZhciBlID0gMDsgZSA8IF90aGlzLmVsTGVuZ3RoOyBlKyspIHtcbiAgICAgIHZhciBlbCA9IF90aGlzLmVsZW1lbnRzW2VdLFxuICAgICAgICAgIGZpeEF0ID0gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZpeC1hdCcpLCAxMCksXG4gICAgICAgICAgZml4UG9zID0gcGFyc2VJbnQoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWZpeC1wb3MnKSwgMTApLFxuICAgICAgICAgIHBhZFRvcCA9IHBhcnNlSW50KGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1wYWQtdG9wJyksIDEwKSxcbiAgICAgICAgICBvZmZTZXQgPSBfdGhpcy5vcHRzLmluY2x1ZGVIZWlnaHQgPyBlbC5vZmZzZXRIZWlnaHQgOiAwO1xuXG4gICAgICBmaXhBdCArPSBfdGhpcy5vcHRzLmluY2x1ZGVIZWlnaHQgPyBlbC5vZmZzZXRIZWlnaHQgOiAwO1xuXG4gICAgICBpZiAoc2Nyb2xsWSA+IGZpeEF0IC0gZml4UG9zICYmIF90aGlzLmZpeGVkRWxzLmluZGV4T2YoZSkgPCAwKSB7XG4gICAgICAgIF90aGlzLmZpeGVkRWxzLnB1c2goZSk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC50b2dnbGUoX3RoaXMub3B0cy5zdHVja0NsYXNzLCB0cnVlKTtcbiAgICAgICAgaWYgKF90aGlzLm9wdHMuZml4UG9zaXRpb24pIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSBwYWRUb3AgKyAncHgnO1xuICAgICAgICAgIGVsLnN0eWxlLnRvcCA9IGZpeFBvcyArICdweCc7XG4gICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsWSA8IGZpeEF0IC0gZml4UG9zIC0gb2ZmU2V0IHx8IHNjcm9sbFkgPD0gMCkge1xuICAgICAgICBfdGhpcy5maXhlZEVscy5zcGxpY2UoX3RoaXMuZml4ZWRFbHMuaW5kZXhPZihlKSwgMSk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoX3RoaXMub3B0cy5zdHVja0NsYXNzKTtcbiAgICAgICAgaWYgKF90aGlzLm9wdHMuZml4UG9zaXRpb24pIHtcbiAgICAgICAgICBlbC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgICBlbC5zdHlsZS50b3AgPSBcIjBcIjtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdUb3AgPSBfdGhpcy5lbGVtZW50c1tlIC0gMV0gPyBfdGhpcy5lbGVtZW50c1tlIC0gMV0uZ2V0QXR0cmlidXRlKCdkYXRhLXBhZC10b3AnKSA6IDA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBlID0gMDsgZSA8IF90aGlzLmZhZGVFbExlbmd0aDsgZSsrKSB7XG4gICAgICB2YXIgX2VsID0gX3RoaXMuZmFkZUVsZW1lbnRzW2VdO1xuICAgICAgdmFyIG9mZlRvcCA9IF9lbC5vZmZzZXRUb3A7XG4gICAgICB2YXIgZWxIZWlnaHQgPSBfZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgdmFyIG9wYWNpdHkgPSAoKG9mZlRvcCAtIHNjcm9sbFkgKyBlbEhlaWdodCkgLyBlbEhlaWdodCkudG9GaXhlZCgzKTtcblxuICAgICAgaWYgKG9mZlRvcCAtIHNjcm9sbFkgPCAwICYmIG9wYWNpdHkgPj0gMCkge1xuICAgICAgICBfZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsICdvcGFjaXR5OicgKyBvcGFjaXR5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgX3RoaXMuc2Nyb2xsaW5nID0gZmFsc2U7XG4gIH07XG5cbiAgaW5pdCgpO1xuXG4gIHJldHVybiB7XG4gICAgc2Nyb2xsZXI6IHJlcXVlc3RTY3JvbGxcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhbVNjcm9sbDsiXX0=
},{}]},{},[1])